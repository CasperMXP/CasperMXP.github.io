<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="java"><title>react-router | CHILAM</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">react-router</h1><a id="logo" href="/.">CHILAM</a><p class="description">Just Do IT</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Start</i></a><a href="/archives/"><i class="fa fa-archive"> Archiv</i></a><a href="/about/"><i class="fa fa-user"> Über</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">react-router</h1><div class="post-meta">Aug 14, 2018<span> | </span><span class="category"><a href="/categories/搬砖/">搬砖</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 1,878</span><span class="post-meta-item-text"> Words</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-hourglass-half"></i><span class="post-count"> 8</span><span class="post-meta-item-text"> Minutes</span></span></span></div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">Inhalte</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Hello-React-Router"><span class="toc-number">1.</span> <span class="toc-text">Hello React-Router</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#基本概念"><span class="toc-number">2.</span> <span class="toc-text">基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#路由器Router"><span class="toc-number">2.1.</span> <span class="toc-text">路由器Router</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#History"><span class="toc-number">2.1.1.</span> <span class="toc-text">History</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#渲染Router"><span class="toc-number">2.1.2.</span> <span class="toc-text">渲染Router</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#App组件"><span class="toc-number">2.1.3.</span> <span class="toc-text">App组件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#路由Route"><span class="toc-number">2.2.</span> <span class="toc-text">路由Route</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#路径Path"><span class="toc-number">2.2.1.</span> <span class="toc-text">路径Path</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Switch"><span class="toc-number">2.2.2.</span> <span class="toc-text">Switch</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Route如何渲染"><span class="toc-number">2.2.3.</span> <span class="toc-text">Route如何渲染</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Main组件"><span class="toc-number">2.3.</span> <span class="toc-text">Main组件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#嵌套路由"><span class="toc-number">2.3.1.</span> <span class="toc-text">嵌套路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#路径参数"><span class="toc-number">2.3.2.</span> <span class="toc-text">路径参数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Link"><span class="toc-number">2.4.</span> <span class="toc-text">Link</span></a></li></ol></li></ol></div></div><div class="post-content"><h2 id="Hello-React-Router"><a href="#Hello-React-Router" class="headerlink" title="Hello React-Router"></a>Hello React-Router</h2><ul>
<li>安装创建react的脚手架</li>
</ul>
<figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">sudo </span><span class="string">npm </span><span class="string">install </span><span class="built_in">create-react-app</span> -g</span><br></pre></td></tr></table></figure>
<ul>
<li>使用脚手架创建router-demo</li>
</ul>
<figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">create-react-app</span> <span class="string">router-demo</span></span><br></pre></td></tr></table></figure>
<ul>
<li>安装router的依赖</li>
</ul>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install</span> react-router-dom</span><br></pre></td></tr></table></figure>
<ul>
<li>新建AppHome.js</li>
</ul>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml">import React from "react";</span></span><br><span class="line"><span class="xml">import </span><span class="template-variable">&#123;BrowserRouter as Router,Route,Link&#125;</span><span class="xml"> from "react-router-dom";</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">//Home组件</span></span><br><span class="line"><span class="xml">const Home = () =&gt; (</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">)</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">//About组件</span></span><br><span class="line"><span class="xml">const About = () =&gt; (</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>About<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">)</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">//Topic组件</span></span><br><span class="line"><span class="xml">const Topic = (</span><span class="template-variable">&#123;match&#125;</span><span class="xml">) =&gt; (</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span></span><span class="template-variable">&#123;match.params.topicId&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">)</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">//Topics组件</span></span><br><span class="line"><span class="xml">const Topics = (</span><span class="template-variable">&#123;match&#125;</span><span class="xml">) =&gt; (</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Topics<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=</span></span><span class="template-variable">&#123;`$&#123;match.url&#125;</span><span class="xml"><span class="tag">/<span class="attr">rendering</span>`&#125;&gt;</span>Rendering with React<span class="tag">&lt;/<span class="name">Link</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=</span></span><span class="template-variable">&#123;`$&#123;match.url&#125;</span><span class="xml"><span class="tag">/<span class="attr">components</span>`&#125;&gt;</span>Components<span class="tag">&lt;/<span class="name">Link</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=</span></span><span class="template-variable">&#123;`$&#123;match.url&#125;</span><span class="xml"><span class="tag">/<span class="attr">props-v-state</span>`&#125;&gt;</span>props-v-state<span class="tag">&lt;/<span class="name">Link</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=</span></span><span class="template-variable">&#123;`$&#123;match.path&#125;</span><span class="xml"><span class="tag">/<span class="attr">:topicId</span>`&#125; <span class="attr">component</span>=</span></span><span class="template-variable">&#123;Topic&#125;</span><span class="xml"><span class="tag">/&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Route</span> <span class="attr">exact</span> <span class="attr">path</span>=</span></span><span class="template-variable">&#123;match.path&#125;</span><span class="xml"><span class="tag"> <span class="attr">render</span>=</span></span><span class="template-variable">&#123;()=&gt;(</span></span><br><span class="line"><span class="template-variable">            &lt;h3&gt;please <span class="keyword">select</span> a topic!!!&lt;/h3&gt;</span></span><br><span class="line"><span class="template-variable">        )&#125;</span><span class="xml">&gt;<span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">)</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">const AppHome = () =&gt; (</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">Router</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">"/"</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">Link</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">"/about"</span>&gt;</span>About<span class="tag">&lt;/<span class="name">Link</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">"/topics"</span>&gt;</span>Topics<span class="tag">&lt;/<span class="name">Link</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">Route</span> <span class="attr">exact</span> <span class="attr">path</span>=<span class="string">"/"</span> <span class="attr">component</span>=</span></span><span class="template-variable">&#123;Home&#125;</span><span class="xml"><span class="tag">/&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">"/about"</span> <span class="attr">component</span>=</span></span><span class="template-variable">&#123;About&#125;</span><span class="xml"><span class="tag">/&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">"/topics"</span> <span class="attr">component</span>=</span></span><span class="template-variable">&#123;Topics&#125;</span><span class="xml"><span class="tag">/&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">Router</span>&gt;</span></span></span><br><span class="line"><span class="xml">)</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">export default AppHome</span></span><br></pre></td></tr></table></figure>
<ul>
<li>编辑index.js引用AppHome.js</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'./index.css'</span>;</span><br><span class="line"><span class="keyword">import</span> registerServiceWorker <span class="keyword">from</span> <span class="string">'./registerServiceWorker'</span>;</span><br><span class="line"><span class="keyword">import</span> AppHome <span class="keyword">from</span> <span class="string">"./AppHome"</span>;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">AppHome</span>/&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>));</span><br><span class="line">registerServiceWorker();</span><br></pre></td></tr></table></figure>
<ul>
<li>启动npm start</li>
</ul>
<p><a href="https://gitee.com/maxp/router-demo" target="_blank" rel="noopener">源码地址</a></p>
<h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><h3 id="路由器Router"><a href="#路由器Router" class="headerlink" title="路由器Router"></a>路由器Router</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">对于网页项目，存在<span class="tag">&lt;<span class="name">BrowserRouter</span>&gt;</span>和<span class="tag">&lt;<span class="name">HashRouter</span>&gt;</span>2种组件。</span><br><span class="line">当存在服务来管理动态请求的时候需要使用<span class="tag">&lt;<span class="name">BroswerRouter</span>&gt;</span>组件，而<span class="tag">&lt;<span class="name">HashRouter</span>&gt;</span></span><br><span class="line">组件被用于静态网站。</span><br></pre></td></tr></table></figure>
<h4 id="History"><a href="#History" class="headerlink" title="History"></a>History</h4><p>每个路由器都会创建一个history对象并用其保持追踪当前location并且在有变化的时候对网站进行重新的渲染。history对象保证了React-Router提供<br>的其他组件的可用性，所以其他组件必须在Router组件内部渲染。</p>
<h4 id="渲染Router"><a href="#渲染Router" class="headerlink" title="渲染Router"></a>渲染Router</h4><p>路由器组件无法接受两个及以上的子元素。基于这种限制的存在，创建一个App组件来渲染应用其余部分是一个有效的方法<br>（对于服务端渲染，将应用从router组件中分离也是重要的）。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; BrowserRouter &#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span></span><br><span class="line">ReactDOM.render((</span><br><span class="line">  &lt;BrowserRouter&gt;</span><br><span class="line">    &lt;App /&gt;</span><br><span class="line">  &lt;<span class="regexp">/BrowserRouter&gt;</span></span><br><span class="line"><span class="regexp">), document.getElementById('root'))</span></span><br></pre></td></tr></table></figure>
<h4 id="App组件"><a href="#App组件" class="headerlink" title="App组件"></a>App组件</h4><p>应用通过App组件定义。简化一下，我们将应用拆分成两个部分。<header>组件包含网站的导航链接。<main>组件则呈现其余内容。</main></header></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> App = <span class="function"><span class="params">()</span> =&gt;</span> (</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;Header /&gt;</span><br><span class="line">    &lt;Main /&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">)</span></span><br></pre></td></tr></table></figure>
<h3 id="路由Route"><a href="#路由Route" class="headerlink" title="路由Route"></a>路由Route</h3><p>Route组件是React-Router中主要的结构单元，在任意位置只要匹配了URL路径名（pathname）就可以创建Route元素进行渲染。</p>
<h4 id="路径Path"><a href="#路径Path" class="headerlink" title="路径Path"></a>路径Path</h4><p>Route接受一个数为string类型的path，该值路由匹配的路径名的类型。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Route <span class="built_in">path</span>=<span class="string">'/roster'</span>/&gt;</span><br><span class="line">// 当路径名为<span class="string">'/'</span>时, <span class="built_in">path</span>不匹配</span><br><span class="line">// 当路径名为<span class="string">'/roster'</span>或<span class="string">'/roster/2'</span>时, <span class="built_in">path</span>匹配</span><br><span class="line">// 当你只想匹配<span class="string">'/roster'</span>时，你需要使用<span class="string">"exact"</span>参数</span><br><span class="line">// 则路由仅匹配<span class="string">'/roster'</span>而不会匹配<span class="string">'/roster/2'</span></span><br><span class="line">&lt;Route exact <span class="built_in">path</span>=<span class="string">'/roster'</span>/&gt;</span><br></pre></td></tr></table></figure>
<p>注意：在匹配路由时，React Router只关注location的路径名。当URL如下时：</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">http</span>://www.example.com/my-projects/<span class="literal">one</span>?extra=<span class="literal">false</span></span><br></pre></td></tr></table></figure>
<ul>
<li>React Router去匹配的只是’/my-projects/one’这一部分。</li>
</ul>
<h4 id="Switch"><a href="#Switch" class="headerlink" title="Switch"></a>Switch</h4><p>可以在路由器(router)组件中的任意位置创建多个Route，但通常我们会把它们放在同一个位置。使用Switch组件来包裹一组Route。<br>Switch会遍历自身的子元素（即路由）并对第一个匹配当前路径的元素进行渲染。</p>
<p>假设，网站希望匹配以下路径：</p>
<ul>
<li><p>/ ： 主页</p>
</li>
<li><p>/roster ： 团体列表</p>
</li>
<li><p>/roster/:number ：运动员页面，使用运动员的编号作为标识</p>
</li>
<li><p>/schedule ：团队的赛程表</p>
</li>
</ul>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">Switch</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">Route</span> <span class="attr">exact</span> <span class="attr">path</span>=<span class="string">'/'</span> <span class="attr">component</span>=</span></span><span class="template-variable">&#123;Home&#125;</span><span class="xml"><span class="tag">/&gt;</span></span></span><br><span class="line"><span class="xml">  </span><span class="template-tag">&#123;/* <span class="name">both</span> /roster and /roster/:number begin with /roster */&#125;</span><span class="xml"></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">'/roster'</span> <span class="attr">component</span>=</span></span><span class="template-variable">&#123;Roster&#125;</span><span class="xml"><span class="tag">/&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">'/schedule'</span> <span class="attr">component</span>=</span></span><span class="template-variable">&#123;Schedule&#125;</span><span class="xml"><span class="tag">/&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">Switch</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h4 id="Route如何渲染"><a href="#Route如何渲染" class="headerlink" title="Route如何渲染"></a>Route如何渲染</h4><p>当一个路由的path匹配成功后，路由用来确定渲染结果的参数有三种。只需要提供其中一个即可。</p>
<ul>
<li><p>component：一个React组件。当带有component参数的route匹配成功后，route会返回一个新的元素，其为component参数所对应的React组件</p>
</li>
<li><p>render：一个返回React element的函数。当匹配成功后调用该函数。该过程与传入component参数类似，并且对于行级渲染与需要向元素传入额外参数的操作会更有用。</p>
</li>
<li><p>children ： 一个返回React element的函数。与上述两个参数不同，无论route是否匹配当前location，其都会被渲染。</p>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">'/page'</span> <span class="attr">component</span>=<span class="string">&#123;Page&#125;</span> /&gt;</span></span><br><span class="line">const extraProps = &#123; color: 'red' &#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">'/page'</span> <span class="attr">render</span>=<span class="string">&#123;(props)</span> =&gt;</span> (</span><br><span class="line">  <span class="tag">&lt;<span class="name">Page</span> &#123;<span class="attr">...props</span>&#125; <span class="attr">data</span>=<span class="string">&#123;extraProps&#125;/</span>&gt;</span></span><br><span class="line">)&#125;/&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">'/page'</span> <span class="attr">children</span>=<span class="string">&#123;(props)</span> =&gt;</span> (</span><br><span class="line">  props.match</span><br><span class="line">    ? <span class="tag">&lt;<span class="name">Page</span> &#123;<span class="attr">...props</span>&#125;/&gt;</span></span><br><span class="line">    : <span class="tag">&lt;<span class="name">EmptyPage</span> &#123;<span class="attr">...props</span>&#125;/&gt;</span></span><br><span class="line">)&#125;/&gt;</span><br></pre></td></tr></table></figure>
<p>通常component参数与render参数被更经常地使用。children参数偶尔会被使用，它更常用在path无法匹配时呈现的’空’状态。</p>
<p>通过Route渲染的元素会被传入一些参数。分别是match对象，当前location对象以及history对象（由router创建）</p>
<h3 id="Main组件"><a href="#Main组件" class="headerlink" title="Main组件"></a>Main组件</h3><p>现在我们清楚了根路由的结构，我们需要实际渲染我们的路由。对于这个应用，我们将会在Main组件中渲染Switch与Route，<br>这一过程会将route匹配生成的HTML放在main节点中。</p>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml">import </span><span class="template-variable">&#123; Switch, Route &#125;</span><span class="xml"> from 'react-router-dom'</span></span><br><span class="line"><span class="xml">const Main = () =&gt; (</span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">main</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">Switch</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">Route</span> <span class="attr">exact</span> <span class="attr">path</span>=<span class="string">'/'</span> <span class="attr">component</span>=</span></span><span class="template-variable">&#123;Home&#125;</span><span class="xml"><span class="tag">/&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">'/roster'</span> <span class="attr">component</span>=</span></span><span class="template-variable">&#123;Roster&#125;</span><span class="xml"><span class="tag">/&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">'/schedule'</span> <span class="attr">component</span>=</span></span><span class="template-variable">&#123;Schedule&#125;</span><span class="xml"><span class="tag">/&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">Switch</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span></span><br><span class="line"><span class="xml">)</span></span><br></pre></td></tr></table></figure>
<h4 id="嵌套路由"><a href="#嵌套路由" class="headerlink" title="嵌套路由"></a>嵌套路由</h4><p>运动员路由/roster/:number并未包含在上述Switch中。它由Roster组件负责在路径包含’/roster’的情形下进行渲染。</p>
<p>在<roster>组件中，我们将为两种路径进行渲染：</roster></p>
<ul>
<li>/roster ：对应路径名仅仅是/roster时，因此需要在exact元素上添加exact参数。</li>
<li>/roster/:number ： 该路由使用一个路由参数来获取/roster后的路径名。</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const Roster = () =&gt; (</span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>This is a roster page!<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Switch</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Route</span> <span class="attr">exact</span> <span class="attr">path</span>=<span class="string">'/roster'</span> <span class="attr">component</span>=<span class="string">&#123;FullRoster&#125;/</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">'/roster/:number'</span> <span class="attr">component</span>=<span class="string">&#123;Player&#125;/</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Switch</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="路径参数"><a href="#路径参数" class="headerlink" title="路径参数"></a>路径参数</h4><p>有时路径名中存在我们需要获取的参数。例如，在运动员界面，我们需要获取运动员的编号。我们可以向route的路径字符串中添加path参数</p>
<p>如’/roster/:number’中:number这种写法意味着/roster/后的路径名将会被获取并存在match.params.number中。例如，路径名’/roster/6’会获取到一个对象：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">number:</span> <span class="string">'6'</span> &#125; <span class="comment">// 注获取的值是字符串类型的</span></span><br></pre></td></tr></table></figure>
<p>Player组件可以使用props.match.params对象来确定需要被渲染的运动员的数据。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 返回运动员对象的API</span></span><br><span class="line"><span class="keyword">import</span> PlayerAPI <span class="keyword">from</span> <span class="string">'./PlayerAPI'</span></span><br><span class="line"><span class="keyword">const</span> Player = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> player = PlayerAPI.get(</span><br><span class="line">    <span class="built_in">parseInt</span>(props.match.params.number, <span class="number">10</span>)</span><br><span class="line">  )</span><br><span class="line">  <span class="keyword">if</span> (!player) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Sorry, but the player was not found<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h1&gt;&#123;player.name&#125; (#&#123;player.number&#125;)&lt;/h1&gt;</span><br><span class="line">      &lt;h2&gt;&#123;player.position&#125;&lt;<span class="regexp">/h2&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="Link"><a href="#Link" class="headerlink" title="Link"></a>Link</h3><p>现在，我们应用需要在各个页面间切换。如果使用锚点元素（就是）实现，在每次点击时页面将被重新加载。<br>React Router提供了Link组件用来避免这种状况的发生。当你点击Link时，URL会更新，组件会被重新渲染，但是页面不会重新加载。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Link &#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span></span><br><span class="line"><span class="keyword">const</span> Header = <span class="function"><span class="params">()</span> =&gt;</span> (</span><br><span class="line">  &lt;header&gt;</span><br><span class="line">    &lt;nav&gt;</span><br><span class="line">      &lt;ul&gt;</span><br><span class="line">        &lt;li&gt;<span class="xml"><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">'/'</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">        &lt;li&gt;<span class="xml"><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">'/roster'</span>&gt;</span>Roster<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">        &lt;li&gt;<span class="xml"><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">'/schedule'</span>&gt;</span>Schedule<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">      &lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>nav&gt;</span><br><span class="line">  &lt;<span class="regexp">/header&gt;</span></span><br><span class="line"><span class="regexp">)</span></span><br></pre></td></tr></table></figure>
<p>Link使用’to’参数来描述需要定位的页面。它的值即可是字符串也可是location对象（包含pathname，search，hash与state属性）。<br>如果其值为字符床将会被转换为location对象。</p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a class="article-share-link" data-url="http://chilam.me/2018/08/14/react-router/" data-id="cjkv44hib008c4b8kq52mup3z" data-qrcode="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK4AAACuCAAAAACKZ2kyAAABv0lEQVR42u3aS47DIBAFQN//0p7tSFHgdRNwIhWrUUJMeRat/nBd8br/rddP3n2b/PbasXBxcZe593AluFfiu8+TVxqfgouLe5LbO2bH/okNFxf3i7njBGW8Z5wS4eLi/iK3d3xSDuHi4n4bN29zVInjImdjrYaLi7vAzbuU+/7e0t/FxcVtce/iqo5VejvfPgEXF/cINw8o1QSoGhwL7RVcXNyD3F57NClsqtBCrYaLi7uB22uF7GuqTlS4uLgHueOAlY9Lq8dXiytcXNynuL0maf6S452T5+Di4h7hVh+03hjNk6HJTlxc3G3c/IBqQtO7fjF5Ai4u7kPcz+Lyf0T0Mri4uAe5K2OS9fSl0CLBxcU9wq3WFNVBSO+VJuNYXFzc49xq+tK7TpFc0SjfI8PFxd3ArbZCeu2PlbErLi7uU9yV65hJKpMHr0psw8XF/SR3ZYCalzp56nNVf4CLi7uBm68kWamGp16TBRcX9wy3F7xyRH55KwpzuLi4B7lJw3Sl1FkJec1RCi4u7kFurznSa5vi4uL+CncpDC10OXBxcc9zy1cnF0YyefGDi4v7FLcXnnoNlN7YBhcX9yD3D//eAS8JgGyFAAAAAElFTkSuQmCC">Aktie</a><div class="tags"><a href="/tags/react-router/">react-router</a></div><div class="post-nav"><a class="pre" href="/2018/08/15/router-history-hash/">前端路由的实现原理-history,hash</a><a class="next" href="/2018/08/13/webpack/">webpack</a></div><div id="container"></div><link rel="stylesheet" href="/css/default.css?v=0.0.0"><script src="/js/gitment.browser.js?v=0.0.0"></script><script>var gitment = new Gitment({
  owner: 'CasperMXP',
  repo: 'CasperMXP.github.io',
  oauth: {
    client_id: '2cf162fa015e397bb3c9',
    client_secret: '9c97449f4ec96ac4a1064e819e92fde840e66ec7',
  },
})
gitment.render('container')
</script></div></div></div><div class="pure-u-1 pure-u-md-1-4"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Kategorien</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/1房2人3餐4季/">1房2人3餐4季</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/搬砖/">搬砖</a><span class="category-list-count">98</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/bable/" style="font-size: 15px;">bable</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/design-pattern/" style="font-size: 15px;">design-pattern</a> <a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/dva/" style="font-size: 15px;">dva</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/hibernate/" style="font-size: 15px;">hibernate</a> <a href="/tags/hystrix/" style="font-size: 15px;">hystrix</a> <a href="/tags/Hystrix/" style="font-size: 15px;">Hystrix</a> <a href="/tags/ibatis/" style="font-size: 15px;">ibatis</a> <a href="/tags/idea/" style="font-size: 15px;">idea</a> <a href="/tags/spring/" style="font-size: 15px;">spring</a> <a href="/tags/test/" style="font-size: 15px;">test</a> <a href="/tags/modules/" style="font-size: 15px;">modules</a> <a href="/tags/javaweb/" style="font-size: 15px;">javaweb</a> <a href="/tags/jmm/" style="font-size: 15px;">jmm</a> <a href="/tags/jvm/" style="font-size: 15px;">jvm</a> <a href="/tags/life/" style="font-size: 15px;">life</a> <a href="/tags/links/" style="font-size: 15px;">links</a> <a href="/tags/cache/" style="font-size: 15px;">cache</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/logback/" style="font-size: 15px;">logback</a> <a href="/tags/markdown/" style="font-size: 15px;">markdown</a> <a href="/tags/maths/" style="font-size: 15px;">maths</a> <a href="/tags/maven/" style="font-size: 15px;">maven</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/nginx/" style="font-size: 15px;">nginx</a> <a href="/tags/node/" style="font-size: 15px;">node</a> <a href="/tags/nodejs/" style="font-size: 15px;">nodejs</a> <a href="/tags/react-router/" style="font-size: 15px;">react-router</a> <a href="/tags/react/" style="font-size: 15px;">react</a> <a href="/tags/redux/" style="font-size: 15px;">redux</a> <a href="/tags/html/" style="font-size: 15px;">html</a> <a href="/tags/spring-boot/" style="font-size: 15px;">spring-boot</a> <a href="/tags/security/" style="font-size: 15px;">security</a> <a href="/tags/sublime/" style="font-size: 15px;">sublime</a> <a href="/tags/javaee/" style="font-size: 15px;">javaee</a> <a href="/tags/weblogic/" style="font-size: 15px;">weblogic</a> <a href="/tags/webpack/" style="font-size: 15px;">webpack</a> <a href="/tags/win10/" style="font-size: 15px;">win10</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Letzte</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/08/15/dva/">dva</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/15/redux/">redux</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/15/router-history-hash/">前端路由的实现原理-history,hash</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/14/react-router/">react-router</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/13/webpack/">webpack</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/13/javascript-modules/">前端模块化</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/11/react/">react</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/11/babel/">babel</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/11/nodejs/">nodejs</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/20/interview-2/">2.面试准备-框架</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">CHILAM.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" color="100,99,98" opacity="0.7" zIndex="-1" count="30" src="//cdn.bootcss.com/canvas-nest.js/1.0.1/canvas-nest.min.js"></script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>