<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="java"><title>1.读书笔记《深入分布式缓存》-缓存为王 | CHILAM</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">1.读书笔记《深入分布式缓存》-缓存为王</h1><a id="logo" href="/.">CHILAM</a><p class="description">多读书，多看报，少吃零食，多睡觉</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Start</i></a><a href="/archives/"><i class="fa fa-archive"> Archiv</i></a><a href="/about/"><i class="fa fa-user"> Über</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">1.读书笔记《深入分布式缓存》-缓存为王</h1><div class="post-meta">Aug 2, 2017<span> | </span><span class="category"><a href="/categories/搬砖/">搬砖</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 843</span><span class="post-meta-item-text"> Words</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-hourglass-half"></i><span class="post-count"> 3</span><span class="post-meta-item-text"> Minutes</span></span></span></div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">Inhalte</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#什么是缓存"><span class="toc-number">1.</span> <span class="toc-text">什么是缓存</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#为什么使用缓存"><span class="toc-number">2.</span> <span class="toc-text">为什么使用缓存</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#从用户体验说起"><span class="toc-number">2.1.</span> <span class="toc-text">从用户体验说起</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#用户体验的定义"><span class="toc-number">2.1.1.</span> <span class="toc-text">用户体验的定义</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#关于系统的性能"><span class="toc-number">2.2.</span> <span class="toc-text">关于系统的性能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#从网站的架构发展看缓存"><span class="toc-number">2.3.</span> <span class="toc-text">从网站的架构发展看缓存</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#客户端缓存"><span class="toc-number">2.4.</span> <span class="toc-text">客户端缓存</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#页面缓存"><span class="toc-number">2.4.1.</span> <span class="toc-text">页面缓存</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#浏览器缓存"><span class="toc-number">2.4.2.</span> <span class="toc-text">浏览器缓存</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#网络中的缓存"><span class="toc-number">2.5.</span> <span class="toc-text">网络中的缓存</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#web代理缓存"><span class="toc-number">2.5.1.</span> <span class="toc-text">web代理缓存</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#服务端缓存"><span class="toc-number">2.6.</span> <span class="toc-text">服务端缓存</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#数据库缓存"><span class="toc-number">2.6.1.</span> <span class="toc-text">数据库缓存</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#平台级缓存"><span class="toc-number">2.7.</span> <span class="toc-text">平台级缓存</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#应用级缓存"><span class="toc-number">2.8.</span> <span class="toc-text">应用级缓存</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#缓存算法"><span class="toc-number">2.8.1.</span> <span class="toc-text">缓存算法</span></a></li></ol></li></ol></li></ol></div></div><div class="post-content"><h2 id="什么是缓存"><a href="#什么是缓存" class="headerlink" title="什么是缓存"></a>什么是缓存</h2><p>缓存：存储在计算机上的一个原始数据复制集，以便于访问。</p>
<ul>
<li>CPU缓存，L1,L2,L3是指位于CPU与内存之间的临时存储器，解决CPU运算速度要比内存读写速度不匹配的矛盾。</li>
</ul>
<h2 id="为什么使用缓存"><a href="#为什么使用缓存" class="headerlink" title="为什么使用缓存"></a>为什么使用缓存</h2><h3 id="从用户体验说起"><a href="#从用户体验说起" class="headerlink" title="从用户体验说起"></a>从用户体验说起</h3><h4 id="用户体验的定义"><a href="#用户体验的定义" class="headerlink" title="用户体验的定义"></a>用户体验的定义</h4><p>人们对正在使用或期望使用的产品，系统或者服务的认知印象和回应。</p>
<h3 id="关于系统的性能"><a href="#关于系统的性能" class="headerlink" title="关于系统的性能"></a>关于系统的性能</h3><p>系统新能的指标一般包括，响应时间，延迟时间，吞吐量，并发用户数和资源利用率等几个方面。</p>
<ul>
<li>响应时间是指系统对用户请求做出的响应的时间，所有功能的平均响应时间或最大的响应时间。</li>
<li>吞吐量指系统在单位时间内处理请求的数量。</li>
</ul>
<h3 id="从网站的架构发展看缓存"><a href="#从网站的架构发展看缓存" class="headerlink" title="从网站的架构发展看缓存"></a>从网站的架构发展看缓存</h3><ul>
<li>数据缓存，将系统中重复获取的数据信息从数据库加载到本地，同时降低了数据库的负载</li>
<li>缓存同步机制以及共享文件系统或共享存储</li>
<li>数据库调优，优化数据库自身缓存，采用数据库集群以及分库分表策略</li>
<li>数据量太大，导致现在不太可能将缓存存储在本地后再同步了，于是分布式缓存来了。</li>
</ul>
<h3 id="客户端缓存"><a href="#客户端缓存" class="headerlink" title="客户端缓存"></a>客户端缓存</h3><h4 id="页面缓存"><a href="#页面缓存" class="headerlink" title="页面缓存"></a>页面缓存</h4><ul>
<li>页面自身对某些元素或全部元素进行缓存</li>
<li>服务端将静态页面或动态页面的元素进行缓存</li>
<li>HTML5支持离线缓存和本地存储</li>
</ul>
<h4 id="浏览器缓存"><a href="#浏览器缓存" class="headerlink" title="浏览器缓存"></a>浏览器缓存</h4><p>根据一套与服务器的约定的规则进行工作的，工作的规则很简单：检查以确保副本是最新的，通常只要一次会话。浏览器会在硬盘上开辟一个空间来存储资源副本做为缓存。</p>
<h3 id="网络中的缓存"><a href="#网络中的缓存" class="headerlink" title="网络中的缓存"></a>网络中的缓存</h3><p>位于客户端和服务端之间，代理或响应客户端的网络请求，从而对重复的请求返回缓存中的数据资源。</p>
<h4 id="web代理缓存"><a href="#web代理缓存" class="headerlink" title="web代理缓存"></a>web代理缓存</h4><p>将web代理作为一种缓存技术，常用的有正向代理，反向代理和透明代理。</p>
<h3 id="服务端缓存"><a href="#服务端缓存" class="headerlink" title="服务端缓存"></a>服务端缓存</h3><h4 id="数据库缓存"><a href="#数据库缓存" class="headerlink" title="数据库缓存"></a>数据库缓存</h4><ul>
<li>MYSQL查询缓存</li>
</ul>
<p>QueryCache作用于整个MySQL实例，主要用缓存MySQL中的ResultSet<br>主要query_cache_size(设置缓存的内存大小)和query_cahe_type()</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show status like 'Qcache%';</span><br><span class="line">+-------------------------+---------+</span><br><span class="line">|<span class="string"> Variable_name           </span>|<span class="string"> Value   </span>|</span><br><span class="line">+-------------------------+---------+</span><br><span class="line">|<span class="string"> Qcache_free_blocks      </span>|<span class="string"> 1       </span>|<span class="string">  碎片 </span></span><br><span class="line">|<span class="string"> Qcache_free_memory      </span>|<span class="string"> 1031872 </span>|<span class="string">  空余内存</span></span><br><span class="line">|<span class="string"> Qcache_hits             </span>|<span class="string"> 0       </span>|<span class="string">  命中次数</span></span><br><span class="line">|<span class="string"> Qcache_inserts          </span>|<span class="string"> 0       </span>|<span class="string">  多次未命中查询次数</span></span><br><span class="line">|<span class="string"> Qcache_lowmem_prunes    </span>|<span class="string"> 0       </span>|<span class="string">  因为内存不足被清除的QueryCache</span></span><br><span class="line">|<span class="string"> Qcache_not_cached       </span>|<span class="string"> 410     </span>|<span class="string">  </span></span><br><span class="line">|<span class="string"> Qcache_queries_in_cache </span>|<span class="string"> 0       </span>|</span><br><span class="line">|<span class="string"> Qcache_total_blocks     </span>|<span class="string"> 1       </span>|</span><br><span class="line">+-------------------------+---------+</span><br><span class="line">8 rows in set (0.02 sec)</span><br></pre></td></tr></table></figure>
<ul>
<li>InnoDB的缓存性能</li>
</ul>
<p>当使用InnoDB存储引擎的时候，innodb_buffer_pool_size参数可能是影响性能最为关键的一个参数，用来设置用于缓存InnoDB索引和数据块的内存区域大小。</p>
<p>table_cache用来限制缓存表的最大数目。</p>
<h3 id="平台级缓存"><a href="#平台级缓存" class="headerlink" title="平台级缓存"></a>平台级缓存</h3><p>缓存框架，ehcache等框架</p>
<h3 id="应用级缓存"><a href="#应用级缓存" class="headerlink" title="应用级缓存"></a>应用级缓存</h3><p>应用级缓存需要开发者通过代码来实现缓存机制，</p>
<h4 id="缓存算法"><a href="#缓存算法" class="headerlink" title="缓存算法"></a>缓存算法</h4><ul>
<li>LRU，替换到最近被请求最少的对象</li>
<li>LFU,替换掉访问次数最少的对象</li>
<li>SIZE，替换占用空间最大的</li>
</ul>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a class="article-share-link" data-url="http://chilam.me/2017/08/02/cache-1-introduce/" data-id="cjj9w1ko200013kdatrlgu3bp" data-qrcode="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACIUlEQVR42u3aS27EMAwE0bn/pZ1tgEB2tcgJYLG0CjL+6HnRICV9Pnhcv8bf/5MrV3eRZ7YNGTJkvJZx3Y7V5NKX3fPIe1fXyJAhYw6DxyKJSxK7nHE/NxkyZMgg8VoP0/S9MmTIkEFCdq987CpAZciQMZNBXnD/Mh67e5+mrReXIUPGCxm8yfz/v7+yvyFDhoxXMa5w1JfeKuXj8jkyZMg4msEDLl24JwcpKoErQ4aMOYx0Kb93GS69cvmBZMiQMYYR39zE5oDlrzJkyDiaQRbuebzuXcmDO97IlCFDxhEMHqzpJmVX8YfiW4YMGQMY6QJZevQhJfEjGmjSMmTIeDnjoSHcmkra1vLy8aHClSFDxqGMdPmet6MNO6t8eU6GDBnjGWnzmYY4L1LRaREZMmQczUinUmk+9wrN+MyIDBkyDmLwSaQR2bXl+fB8GTJkDGZsPjRchuO85YeWIUPGAAYv5vYW8dMrv96Ly5Ah41UMHp28cOxqbtMny5AhYw6DN5mVVpZHLV/ykyFDxhwGh+1tLaTNbfA5ZMiQMYZReQ2Hpc0tOsAhQ4aMQxlXOHiZmEZnpTyVIUPG2Qw+eMjyKaZNb1qYypAh4yTGXsj2bhiQLc+Hby9DhowBjDRG65udqMPmRzdkyJAho1xd7sVu6ViYDBkyBjNIEdl1/ItHuQwZMiYwKpOrF3+VAlGGDBkTGPw2HpcNZ0DKxaUMGTKOYPwAAo6odjRQt20AAAAASUVORK5CYII=">Aktie</a><div class="tags"><a href="/tags/cache/">cache</a></div><div class="post-nav"><a class="pre" href="/2017/08/03/cache-2-distribute/">2.读书笔记《深入分布式缓存》-分布式系统理论</a><a class="next" href="/2017/08/02/cache-4-ehcache/">4.读书笔记《深入分布式缓存》-ehcache</a></div><div id="container"></div><link rel="stylesheet" href="/css/default.css?v=0.0.0"><script src="/js/gitment.browser.js?v=0.0.0"></script><script>var gitment = new Gitment({
  owner: 'CasperMXP',
  repo: 'CasperMXP.github.io',
  oauth: {
    client_id: '2cf162fa015e397bb3c9',
    client_secret: '9c97449f4ec96ac4a1064e819e92fde840e66ec7',
  },
})
gitment.render('container')
</script></div></div></div><div class="pure-u-1 pure-u-md-1-4"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Kategorien</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/1房2人3餐4季/">1房2人3餐4季</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/搬砖/">搬砖</a><span class="category-list-count">83</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/links/" style="font-size: 15px;">links</a> <a href="/tags/cache/" style="font-size: 15px;">cache</a> <a href="/tags/design-pattern/" style="font-size: 15px;">design-pattern</a> <a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/hibernate/" style="font-size: 15px;">hibernate</a> <a href="/tags/Hystrix/" style="font-size: 15px;">Hystrix</a> <a href="/tags/idea/" style="font-size: 15px;">idea</a> <a href="/tags/spring/" style="font-size: 15px;">spring</a> <a href="/tags/test/" style="font-size: 15px;">test</a> <a href="/tags/javaweb/" style="font-size: 15px;">javaweb</a> <a href="/tags/jmm/" style="font-size: 15px;">jmm</a> <a href="/tags/jvm/" style="font-size: 15px;">jvm</a> <a href="/tags/life/" style="font-size: 15px;">life</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/logback/" style="font-size: 15px;">logback</a> <a href="/tags/markdown/" style="font-size: 15px;">markdown</a> <a href="/tags/maths/" style="font-size: 15px;">maths</a> <a href="/tags/maven/" style="font-size: 15px;">maven</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/nginx/" style="font-size: 15px;">nginx</a> <a href="/tags/node/" style="font-size: 15px;">node</a> <a href="/tags/spring-boot/" style="font-size: 15px;">spring-boot</a> <a href="/tags/sublime/" style="font-size: 15px;">sublime</a> <a href="/tags/javaee/" style="font-size: 15px;">javaee</a> <a href="/tags/weblogic/" style="font-size: 15px;">weblogic</a> <a href="/tags/win10/" style="font-size: 15px;">win10</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Letzte</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/07/02/poem-3/">傲红尘</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/17/links/">1.收藏的一些链接</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/16/life-dinner-noodle/">黑胡椒意面</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/14/interview-1/">1.面试准备-Java基础</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/04/docker/">1.学习笔记-docker基本概念</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/17/spring-boot-8/">8.sb-原理</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/17/spring-boot-7/">7.sb-jdbcTemplate</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/17/spring-boot-6/">6.sb-DevTools</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/17/spring-boot-5/">5.sb-Swagger</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/17/spring-boot-4/">4.sb-日志</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">CHILAM.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" color="100,99,98" opacity="0.7" zIndex="-1" count="30" src="//cdn.bootcss.com/canvas-nest.js/1.0.1/canvas-nest.min.js"></script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>